### ===========================================
### MÓDULO DE CHECKOUT
### ===========================================
### Base URL: http://localhost:3000/api/checkout
### ===========================================

### Variáveis de ambiente
@baseUrl = http://localhost:3000/api
@checkoutUrl = {{baseUrl}}/checkout
@contentType = application/json

### ===========================================
### REGISTRO DE GUEST (CHECKOUT SEM LOGIN)
### ===========================================
### Rota pública - não requer autenticação
### Cria: usuário + perfil + endereço + telefone + cartão
### Retorna: access_token para continuar o checkout
### ===========================================

### Registro completo PF para checkout
POST {{checkoutUrl}}/register
Content-Type: {{contentType}}

{
  "email": "guest.checkout@email.com",
  "password": "Senha123",
  "profileType": "PF",
  "profile": {
    "firstName": "João",
    "lastName": "Silva",
    "cpf": "529.982.247-25",
    "birthDate": "1990-05-15",
    "gender": "M"
  },
  "address": {
    "street": "Rua das Flores",
    "number": "123",
    "complement": "Apto 45",
    "neighborhood": "Centro",
    "city": "São Paulo",
    "state": "SP",
    "zipCode": "01234-567"
  },
  "phone": {
    "ddd": "11",
    "number": "999998888"
  },
  "card": {
    "lastFourDigits": "2931",
    "holderName": "JOAO SILVA",
    "expirationMonth": "12",
    "expirationYear": "2030",
    "brand": "Visa"
  }
}

### Registro completo PJ para checkout
POST {{checkoutUrl}}/register
Content-Type: {{contentType}}

{
  "email": "empresa.checkout@email.com",
  "password": "Senha123",
  "profileType": "PJ",
  "profile": {
    "companyName": "Empresa Exemplo LTDA",
    "cnpj": "11.222.333/0001-81",
    "tradingName": "Empresa Exemplo"
  },
  "address": {
    "street": "Av. Paulista",
    "number": "1000",
    "complement": "Sala 101",
    "neighborhood": "Bela Vista",
    "city": "São Paulo",
    "state": "SP",
    "zipCode": "01310-100"
  },
  "phone": {
    "ddd": "11",
    "number": "32223333"
  },
  "card": {
    "lastFourDigits": "9903",
    "holderName": "EMPRESA EXEMPLO LTDA",
    "expirationMonth": "12",
    "expirationYear": "2030",
    "brand": "Mastercard"
  }
}

### ===========================================
### EXEMPLOS DE ERROS
### ===========================================

### Erro: Email já cadastrado
POST {{checkoutUrl}}/register
Content-Type: {{contentType}}

{
  "email": "pessoa.fisica2@email.com",
  "password": "Senha123",
  "profileType": "PF",
  "profile": {
    "firstName": "Teste",
    "lastName": "Duplicado",
    "cpf": "529.982.247-25",
    "birthDate": "1990-05-15"
  },
  "address": {
    "street": "Rua Teste",
    "number": "1",
    "neighborhood": "Centro",
    "city": "SP",
    "state": "SP",
    "zipCode": "01234-567"
  },
  "phone": {
    "ddd": "11",
    "number": "999999999"
  },
  "card": {
    "lastFourDigits": "2931",
    "holderName": "TESTE",
    "expirationMonth": "12",
    "expirationYear": "2030",
    "brand": "Visa"
  }
}

### Erro: CPF inválido
POST {{checkoutUrl}}/register
Content-Type: {{contentType}}

{
  "email": "teste.cpf@email.com",
  "password": "Senha123",
  "profileType": "PF",
  "profile": {
    "firstName": "Teste",
    "lastName": "CPF Invalido",
    "cpf": "111.111.111-11",
    "birthDate": "1990-05-15"
  },
  "address": {
    "street": "Rua Teste",
    "number": "1",
    "neighborhood": "Centro",
    "city": "SP",
    "state": "SP",
    "zipCode": "01234-567"
  },
  "phone": {
    "ddd": "11",
    "number": "999999999"
  },
  "card": {
    "lastFourDigits": "2931",
    "holderName": "TESTE",
    "expirationMonth": "12",
    "expirationYear": "2030",
    "brand": "Visa"
  }
}

### Erro: Últimos 4 dígitos inválidos
POST {{checkoutUrl}}/register
Content-Type: {{contentType}}

{
  "email": "teste.card@email.com",
  "password": "Senha123",
  "profileType": "PF",
  "profile": {
    "firstName": "Teste",
    "lastName": "Card Invalido",
    "cpf": "529.982.247-25",
    "birthDate": "1990-05-15"
  },
  "address": {
    "street": "Rua Teste",
    "number": "1",
    "neighborhood": "Centro",
    "city": "SP",
    "state": "SP",
    "zipCode": "01234-567"
  },
  "phone": {
    "ddd": "11",
    "number": "999999999"
  },
  "card": {
    "lastFourDigits": "12",
    "holderName": "TESTE",
    "expirationMonth": "12",
    "expirationYear": "2030",
    "brand": "Visa"
  }
}

