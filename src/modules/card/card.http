### ============================================
### CARD API - Rotas de Cartões de Crédito
### ============================================
### Todas as rotas requerem autenticação JWT
### O token deve ser obtido através de login
### ============================================

### Variáveis de Ambiente
@baseUrl = http://localhost:3000
@token = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InBlc3NvYWZpc2ljYUBleGVtcGxvLmNvbSIsInN1YiI6MSwicHJvZmlsZUlkIjoxLCJwcm9maWxlVHlwZSI6IlBGIiwiaWF0IjoxNzMzMzU1MDI3LCJleHAiOjE3MzMzNTg2Mjd9.b3H6kWxLCMaBmtRLZvKBBNIIYNMGFcMtBYCAAJzHSj8

### ============================================
### 1. CRIAR NOVO CARTÃO
### ============================================
### POST /card
### Headers: Authorization Bearer Token
### Body: { cardNumber, holderName, expirationMonth, expirationYear, cvv, brand, isDefault? }
### 
### IMPORTANTE: Os dados sensíveis (cardNumber, cvv) são usados apenas 
### para extrair os últimos 4 dígitos e validação. Não são armazenados.
### ============================================

### Criar cartão Visa
POST {{baseUrl}}/card
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "cardNumber": "4111111111111111",
  "holderName": "João Silva",
  "expirationMonth": "12",
  "expirationYear": "2028",
  "cvv": "123",
  "brand": "Visa",
  "isDefault": true
}

### Criar cartão Mastercard
POST {{baseUrl}}/card
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "cardNumber": "5500000000000004",
  "holderName": "Maria Santos",
  "expirationMonth": "06",
  "expirationYear": "2027",
  "cvv": "456",
  "brand": "Mastercard",
  "isDefault": false
}

### ============================================
### 2. LISTAR TODOS OS CARTÕES DO USUÁRIO
### ============================================
### GET /card
### Headers: Authorization Bearer Token
### Response: Lista de cartões com dados mascarados
### ============================================

### Listar cartões
GET {{baseUrl}}/card
Authorization: Bearer {{token}}

### ============================================
### 3. BUSCAR CARTÃO PADRÃO
### ============================================
### GET /card/default
### Headers: Authorization Bearer Token
### Response: Cartão marcado como padrão
### ============================================

### Buscar cartão padrão
GET {{baseUrl}}/card/default
Authorization: Bearer {{token}}

### ============================================
### 4. BUSCAR CARTÃO POR ID
### ============================================
### GET /card/:id
### Headers: Authorization Bearer Token
### Response: Cartão com dados mascarados
### ============================================

### Buscar cartão por ID (substitua o ID)
GET {{baseUrl}}/card/1
Authorization: Bearer {{token}}

### ============================================
### 5. ATUALIZAR CARTÃO
### ============================================
### PATCH /card/:id
### Headers: Authorization Bearer Token
### Body: { holderName?, isDefault? }
### 
### Nota: Apenas holderName e isDefault podem ser atualizados
### ============================================

### Atualizar nome do titular
PATCH {{baseUrl}}/card/1
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "holderName": "João S. Silva"
}

### Definir cartão como padrão
PATCH {{baseUrl}}/card/1
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "isDefault": true
}

### ============================================
### 6. REMOVER CARTÃO
### ============================================
### DELETE /card/:id
### Headers: Authorization Bearer Token
### Response: 204 No Content
### ============================================

### Remover cartão
DELETE {{baseUrl}}/card/1
Authorization: Bearer {{token}}

### ============================================
### EXEMPLOS DE RESPOSTA
### ============================================
###
### Criação de cartão (retorno):
### {
###   "id": 1,
###   "profileId": 1,
###   "lastFourDigits": "1111",
###   "holderName": "JOÃO S.",
###   "expirationMonth": "12",
###   "expirationYear": "2028",
###   "brand": "Visa",
###   "isDefault": true,
###   "cardToken": null,
###   "createdAt": "2024-12-11T...",
###   "updatedAt": "2024-12-11T..."
### }
###
### Listagem de cartões (retorno):
### [
###   {
###     "id": 1,
###     "lastFourDigits": "1111",
###     "holderName": "JOÃO S.",
###     "expirationMonth": "12",
###     "expirationYear": "2028",
###     "brand": "Visa",
###     "isDefault": true
###   }
### ]
### ============================================
